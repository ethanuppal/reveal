<!-- This file was automatically built. -->
<!-- Copyright (C) 2022 Ethan Uppal. All rights reserved. -->
<html lang="en" dir="ltr">
    <head>
        <title>
            Reveal
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="So you think you're private online?">
        <script src="https://kit.fontawesome.com/556eaabc59.js" crossorigin="anonymous">
        </script>
        <style>
            .type1, .type2, .hide1 { display: none; }
        </style>
    </head>
    <body>
        <inject type="style" src="assets/style.css">
        </inject>
        <style>
            /* Copyright (C) 2022 Ethan Uppal. All rights reserved. */

:root {
    --background-color: #D2D2CF;
    --container-color: white;
    --font-color: black;
}

body {
    /* Font */
    font-family: sans-serif;
    font-size: 16px;

    /* Color */
    background-color: var(--background-color);
}

/* For phones */
#container {
    /* Position */
    position: absolute;
    max-width: 100%;
    left: 0;
    right: 0;

    /* Border and Padding */
    padding: 15px 20px;
    top: 0;
    overflow-x: hidden;
    overflow-y: hidden;

    /* Color */
    background-color: var(--container-color);
    color: var(--font-color);
}

/* For computers */
@media only screen and (min-width: 720px) {
    #container {
        /* Center */
        max-width: 720px;
        margin: 0 auto;
    }
}

.page-subtitle {
    color: gray;
}

.script {
    display: none;
}

#footer {
    font-size: 10px;
}

#footer .normal {
    font-size: 16px;
}

object, iframe {
    width: 100%;
}

.not-link {
    color: var(--font-color);
    text-decoration: none;
}

.copy-link {
    background-color: brightness(80%);
    text-decoration: underline;
}
        </style>
        <inject type="style" src="assets/button.css">
        </inject>
        <style>
            /* Copyright (C) 2022 Ethan Uppal. All rights reserved. */

.fill-button {
    width: 100%;
    border: none;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    border-radius: 5px;
    padding: 10px 20px;
    background-color: var(--background-color);
    cursor: pointer;
}

.link-button {
    color: var(--font-color);
    text-decoration: none;
    border: none;
    display: inline-block;
    border-radius: 5px;
    padding: 5px 10px;
    background-color: var(--background-color);
    cursor: pointer;
    margin-bottom: 5px;
}

.fill-button:hover, .link-button:hover {
    filter: brightness(80%);
}

.link-button:visited {}
        </style>
        <inject type="script" src="scripts/show.js">
        </inject>
        <script>
            // Copyright (C) 2022 Ethan Uppal. All rights reserved.
function showElements(className) {
    const elementsToShow = Array.from(document.getElementsByClassName(className));
    for (var elementToShow of elementsToShow) {
        elementToShow.classList.remove(className);
    }
}
        </script>
        <inject type="script" src="scripts/urlparam.js">
        </inject>
        <script>
            // https://stackoverflow.com/questions/19491336/how-to-get-url-parameter-using-jquery-or-plain-javascript
var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = window.location.search.substring(1),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
        }
    }
    return false;
};
        </script>
        <div id="container">
            <inject type="div" src="fragments/title.html">
            </inject>
            <div>
                <!-- Copyright (C) 2022 Ethan Uppal. All rights reserved. -->
                <div class="row">
                    <a href="index.html" class="not-link">
                        <h1>
                            Welcome to Reveal
                        </h1>
                    </a>
                    <!-- <button id="copy-link" style="margin-left: 5px; visibility: hidden;" onclick="copyPageLink();">
        <i class="fa-solid fa-link"></i>
    </button>
    <script>
        document.getElementById('copy-link').style.visibility = 'visible';
        function copyPageLink() {
            navigator.clipboard.writeText(window.href).then(
                () => {

                },
                error => {
                    error = error || 'No error explanation received.'
                    alert(`Could not copy to clipboard for the following reason: ${error}`);
                }
            );
        }
    </script> -->
                </div>
            </div>
            <inject type="div" src="fragments/back-home.html" replace="IF_OPENED_BY_MAIN" with="getUrlParameter('from') == 'index'">
            </inject>
            <div>
                <!-- Copyright (C) 2022 Ethan Uppal. All rights reserved. -->
                <a id="close-button" class="link-button" onclick="maybeClose();" href="index.html">
                    <i class="fa-solid fa-circle-chevron-left">
                    </i>
                    Return to the main page
                </a>
                <script>
                    var closeButtonLink = document.getElementById('close-button');
    var maybeClose = function(){};
    if (getUrlParameter('from') == 'index') {
        maybeClose = () => {
            window.close('', '_parent', '');
        }
    }
                </script>
            </div>
            <noscript>
                <p>This page needs JavaScript to work, although I am sure that there are ways of doing private browsing mode detection without JavaScript.</p>
            </noscript>
            <div class="script">
                <p>
                    Welcome
                    <span class="type2">
                        back
                    </span>
                    to Reveal's private browsing mode detection test!
                    <span class="type1">
                        Follow the instructions below to do the test.
                    </span>
                    <span class="type2">
                        Here are your results:
                    </span>
                </p>
                <div class="type1">
                    <p>
                        <strong>
                            Instructions
                        </strong>
                    </p>
                    <ol>
                        <li>
                            A token has been set in the browser's local storage.
                        </li>
                        <li>
                            Open a new browser tab.
                        </li>
                        <li>
                            Paste the following link into that tab:
                            <span id="select-link" class="copy-link">
                                https://ethanuppal.github.io/reveal/private.html?type=2
                            </span>
                            <br>
                            (I'm sorry if you're on a mobile device.)
                        </li>
                        <li>
                            Check there for the results.
                        </li>
                    </ol>
                </div>
                <div class="type2">
                    <p>
                        You
                        <strong>
                            are probably
                            <span class="result">
                            </span>
                        </strong>
                        in private browsing mode.
                    </p>
                    <ul>
                        <li>
                            Local storage
                            <strong>
                                was
                                <span class="result">
                                </span>
                            </strong>
                            cleared.
                        </li>
                    </ul>
                    <h2>
                        How does this work?
                    </h2>
                    <p>
                        In private browsing mode, the browser sandboxes each tab. In other words, it tries to isolate every tab so that cookies and data stay separated.
                    </p>
                    <p>
                        The previous page set a token in the browser local storage. If the token is no longer there for this new page, the browser must be sandboxing the tabs.
                    </p>
                </div>
                <p class="hide1">
                    <strong>
                        It seems that the link you are coming from has been corrupted.
                    </strong>
                    Please go to
                    <a href="https://ethanuppal.github.io/reveal/private.html">
                        ethanuppal.github.io/reveal/private.html
                    </a>
                    .
                </p>
                <script>
                    const type = getUrlParameter('type') ?? '1';
                    showElements('script');
                    showElements(`type${type}`);
                    window.history.replaceState(null, "", `reveal/private.html?type=${type}`);

                    switch (type) {
                        case '1':
                            localStorage.setItem('startedTest', 'true');
                            localStorage.removeItem('testResult');
                            break;
                        case '2':
                            if (localStorage.getItem('startedTest') == 'true' && localStorage.getItem('testResult') != 'private') {
                                const resultSpans = document.getElementsByClassName('result');
                                for (const resultSpan of resultSpans) {
                                    resultSpan.innerText = ' not';
                                }
                                localStorage.setItem('testResult', 'general');
                            } else {
                                localStorage.setItem('testResult', 'private');
                            }
                            break;
                        default:
                            showElements('hide1');
                            break;
                    }
                </script>
            </div>
            <inject type="div" src="fragments/footer.html">
            </inject>
            <div>
                <!-- Copyright (C) 2022 Ethan Uppal. All rights reserved. -->
                <div id="footer">
                    <hr>
                    <div class="normal">
                        <p>
                            Check out my other projects!
                        </p>
                        <ul>
                            <li>
                                <a href="https://ethanuppal.github.io/transcribe">
                                    Transcribe Web App
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/ethanuppal/machdump">
                                    MachDump
                                </a>
                            </li>
                        </ul>
                    </div>
                    <p>
                        Copyright (C) 2022 Ethan Uppal. All rights reserved.
                    </p>
                </div>
            </div>
        </div>
    </body>
</html>
